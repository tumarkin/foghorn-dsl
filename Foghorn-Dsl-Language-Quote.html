<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Foghorn.Dsl.Language.Quote</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">foghorn-dsl-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Rob Tumarkin 2025</td></tr><tr><th>License</th><td>Non-commercial use only</td></tr><tr><th>Maintainer</th><td>https://github.com/tumarkin</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Foghorn.Dsl.Language.Quote</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Specification simplification</a></li><li><a href="#g:2">Core quasi-quoters</a></li><li><a href="#g:3">Utility functions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Provides quasi-quoters that simplify building econometric specifications.
These quasi-quoters allow concise syntax for specifying variables, RHS terms,
conditions, and other specification components.</p><h1>Overview</h1><p>Quasi-quoters use the syntax <code>[quoterName| ... |]</code> to embed domain-specific
syntax in Haskell code. At compile time, the quoted content is parsed and
converted to Haskell expressions.</p><h1>Available Quasi-Quoters</h1><h2>Variable Lists</h2><ul><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:svarQ" title="Foghorn.Dsl.Language.Quote">svarQ</a></code> - Create list of named variables</li><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:lhsQ" title="Foghorn.Dsl.Language.Quote">lhsQ</a></code> - Specify left-hand side (dependent) variable</li><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:observeQ" title="Foghorn.Dsl.Language.Quote">observeQ</a></code> - Mark variables for observation</li></ul><h2>RHS Specification</h2><ul><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:rhsQ" title="Foghorn.Dsl.Language.Quote">rhsQ</a></code> - Build right-hand side with interactions</li><li>Use <code>+</code> to add variables</li><li>Use <code>##</code> for factor interactions (includes individual vars)</li><li>Use <code>#</code> for simple interactions (no individual vars)</li></ul><h2>Conditions</h2><ul><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:conditionsQ" title="Foghorn.Dsl.Language.Quote">conditionsQ</a></code> - Specify sample conditions</li><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:andConditionsQ" title="Foghorn.Dsl.Language.Quote">andConditionsQ</a></code> - Add AND conditions to existing spec</li></ul><h2>Fixed Effects and Clustering</h2><ul><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:absorbQ" title="Foghorn.Dsl.Language.Quote">absorbQ</a></code> - Specify absorbed fixed effects</li><li><code><a href="Foghorn-Dsl-Language-Quote.html#v:clusterQ" title="Foghorn.Dsl.Language.Quote">clusterQ</a></code> - Specify clustering variables</li></ul><h1>Examples</h1><pre>-- Create named variables
vars = [svarQ| dealValue leverage profitability |]

-- Specify left-hand side
lhs = [lhsQ| car |]

-- Build RHS with interactions
rhs = [rhsQ| dealValue + leverage ## size |]
-- Expands to: dealValue + leverage + size + (leverage * size)

-- Specify conditions
cond = [conditionsQ| publicTarget &amp;&amp; completedDeal |]

-- Absorbed fixed effects
absorb = [absorbQ| industry year |]

-- Clustered standard errors
vce = [clusterQ| dealNumber |]
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:absorbQ">absorbQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:clusterQ">clusterQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:lhsQ">lhsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:rhsQ">rhsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:conditionsQ">conditionsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:observeQ">observeQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:andConditionsQ">andConditionsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:svarQ">svarQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a></li><li class="src short"><a href="#v:setFromList">setFromList</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/base-4.20.0.0-380b/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; [a] -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/containers-0.7-622f/Data-Set.html#t:Set" title="Data.Set">Set</a> a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Specification simplification</h1></a><div class="top"><p class="src"><a id="v:absorbQ" class="def">absorbQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:absorbQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for absorbed fixed effects.</p><p>Specifies which variables should be absorbed (partialled out) in high-dimensional
fixed effects estimation. Variables are specified as space-separated identifiers.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:absorbQ0">Example</h4><details id="ch:absorbQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[absorbQ| industry year |]
-- Expands to: setFromList [specVar &quot;industry&quot; industry, specVar &quot;year&quot; year]
</pre></details></div></div><div class="top"><p class="src"><a id="v:clusterQ" class="def">clusterQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:clusterQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for clustered standard errors.</p><p>Specifies clustering variables for variance-covariance estimation.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:clusterQ0">Example</h4><details id="ch:clusterQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[clusterQ| dealNumber firm |]
-- Expands to: ClusteredErrors (setFromList [specVar &quot;deal_number&quot; dealNumber, specVar &quot;firm&quot; firm])
</pre></details></div></div><div class="top"><p class="src"><a id="v:lhsQ" class="def">lhsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:lhsQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for left-hand side (dependent) variable.</p><p>Specifies the single dependent variable in a regression. Only one variable
should be provided.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:lhsQ0">Example</h4><details id="ch:lhsQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[lhsQ| car |]
-- Expands to: specVar &quot;car&quot; car
</pre></details></div></div><div class="top"><p class="src"><a id="v:rhsQ" class="def">rhsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:rhsQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for right-hand side (independent) variables.</p><p>Supports a mini-language for specifying independent variables and their
interactions:</p><ul><li><code>+</code> - Add variables</li><li><code>##</code> - Factor interaction (includes individual variables and their interaction)</li><li><code>#</code> - Simple interaction (only the interaction term, no individual variables)</li></ul><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:rhsQ0">Example</h4><details id="ch:rhsQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[rhsQ| dealValue + leverage + profitability |]
-- Simple additive model

[rhsQ| treatmentGroup ## size |]
-- Expands to: treatmentGroup + size + (treatmentGroup * size)

[rhsQ| industry # year |]
-- Interaction only: (industry * year)
</pre></details></div></div><div class="top"><p class="src"><a id="v:conditionsQ" class="def">conditionsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:conditionsQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for sample conditions.</p><p>Specifies filtering conditions using logical operators:</p><ul><li><code>&amp;&amp;</code> - Logical AND</li><li><code>||</code> - Logical OR</li></ul><p>The result is wrapped in <code><a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/base-4.20.0.0-380b/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> for use with <code>conditionsL</code>.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:conditionsQ0">Example</h4><details id="ch:conditionsQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[conditionsQ| publicTarget &amp;&amp; completedDeal |]
-- Expands to: Just (ConditionAnd (Condition publicTarget) (Condition completedDeal))
</pre></details></div></div><div class="top"><p class="src"><a id="v:observeQ" class="def">observeQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:observeQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for marking variables to observe.</p><p>Generates <code>observe_</code> calls for the specified variables, which ensures they
are included in query output for debugging even if not used in an estimation.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:observeQ0">Example</h4><details id="ch:observeQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[observeQ| dealValue targetSize acqSize |]
-- Expands to: observe_ [specVar &quot;deal_value&quot; dealValue, specVar &quot;target_size&quot; targetSize, specVar &quot;acq_size&quot; acqSize]
</pre></details></div></div><div class="top"><p class="src"><a id="v:andConditionsQ" class="def">andConditionsQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:andConditionsQ" class="selflink">#</a></p><div class="doc"><p>Quasi-quoter for adding AND conditions.</p><p>Similar to <code><a href="Foghorn-Dsl-Language-Quote.html#v:conditionsQ" title="Foghorn.Dsl.Language.Quote">conditionsQ</a></code> but applies <code>andCondition_</code> to add the condition
to an existing specification rather than replacing it.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:andConditionsQ0">Example</h4><details id="ch:andConditionsQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>spec <code><a href="Foghorn-Dsl-Language-Quote.html#v:andConditionsQ" title="Foghorn.Dsl.Language.Quote">andConditionsQ</a></code> publicTarget
-- Expands to: spec <code>andCondition_</code> (Condition publicTarget)
</pre></details></div></div><a href="#g:2" id="g:2"><h1>Core quasi-quoters</h1></a><div class="top"><p class="src"><a id="v:svarQ" class="def">svarQ</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/template-haskell-2.22.0.0-e0ca/Language-Haskell-TH-Quote.html#t:QuasiQuoter" title="Language.Haskell.TH.Quote">QuasiQuoter</a> <a href="#v:svarQ" class="selflink">#</a></p><div class="doc"><p>Core quasi-quoter for creating lists of named variables.</p><p>Takes space-separated variable names and creates a list of <code>SpecVar</code> values,
automatically converting camelCase names to snake_case for display.</p><p>This is the fundamental building block used by other quasi-quoters.</p><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:svarQ0">Example</h4><details id="ch:svarQ0"><summary class="hide-when-js-enabled">Expand</summary><pre>[svarQ| dealValue marketCap leverage |]
-- Expands to:
-- [ specVar &quot;deal_value&quot; dealValue
-- , specVar &quot;market_cap&quot; marketCap
-- , specVar &quot;leverage&quot; leverage
-- ]
</pre></details></div></div><a href="#g:3" id="g:3"><h1>Utility functions</h1></a><div class="top"><p class="src"><a id="v:setFromList" class="def">setFromList</a> :: <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/base-4.20.0.0-380b/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a =&gt; [a] -&gt; <a href="${pkgroot}/../../../share/doc/ghc-9.10.1/html/libraries/containers-0.7-622f/Data-Set.html#t:Set" title="Data.Set">Set</a> a <a href="#v:setFromList" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.28.0</p></div></body></html>